description: STM32 FDCAN CAN FD controller

compatible: "st,stm32-fdcan"

include: ["bosch,m_can-base.yaml", "pinctrl-device.yaml"]

properties:
  clocks:
    required: true

  reg:
    required: true

  interrupts:
    required: true

  interrupt-names:
    required: true

  clk-divider:
    type: int
    enum:
      - 1
      - 2
      - 4
      - 6
      - 8
      - 10
      - 12
      - 14
      - 16
      - 18
      - 20
      - 22
      - 24
      - 26
      - 28
      - 30
    description: |
      FDCAN kernel/domain clock divider. The resulting clock is fed to the FDCAN time quanta
      clock. Note that the divisor is common to all 'st,stm32-fdcan' instances.

      The clock divider, which is set via the FDCAN_CKDIV register, defaults to divide by 1 unless
      this property is provided.

  external-timestamp-counter:
    type: phandle
    description: |
      Phandle to the counter device to be used as the external RX timestamp source.

      When this property is defined, the driver configures the FDCAN Timestamp
      Counter Configuration (TSCC) to use the External Timestamp (TSS=0x2).

      Hardware Constraint: The selected timer must be physically routed to the
      fdcan_ts input in the SoC interconnect. (e.g. TIM3 on STM32G4). The exact timer
      connected to the fdcan_ts input can be found in the reference manual of the specific SoC.
